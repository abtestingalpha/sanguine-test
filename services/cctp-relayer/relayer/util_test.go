package relayer

import (
	"testing"

	"github.com/alecthomas/assert"
	"github.com/ethereum/go-ethereum/common/hexutil"
)

func TestParseDestDomain(t *testing.T) {
	// from transaction: https://sepolia.etherscan.io/tx/0xc9599f9949e92bc739d12c745618161c14fd8edad0c0db4194c80cb54a812094#eventlog
	messageBytes, err := hexutil.Decode("0x000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000f8000000000000000000000003000000000003edda0000000000000000000000009f3b8679c73c2fef8b59b4f3444d4e156fb70aa50000000000000000000000009f3b8679c73c2fef8b59b4f3444d4e156fb70aa50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c7d4b196cb0c7b01d743fbc6116a902379c72380000000000000000000000002cd28cda6825c4967372478e87d004637b73f99600000000000000000000000000000000000000000000000000000000000001170000000000000000000000002cd28cda6825c4967372478e87d004637b73f9960000000000000000")
	assert.NoError(t, err)

	domain, err := parseDestDomain(messageBytes)
	assert.NoError(t, err)
	assert.Equal(t, uint32(3), domain)
}
