{"solidity/InterchainApp.sol:IInterchainClientV1":{"code":"0x","runtime-code":"0x","info":{"source":"pragma solidity =0.8.20 ^0.8.0 ^0.8.13;\n\n// contracts/interfaces/IInterchainClientV1.sol\n\ninterface IInterchainClientV1 {\n    error InterchainClientV1__IncorrectMsgValue(uint256 actual, uint256 expected);\n\n    /**\n     * @notice Sets the address of the ExecutionFees contract.\n     * @dev Only callable by the contract owner or an authorized account.\n     * @param executionFees_ The address of the ExecutionFees contract.\n     */\n    function setExecutionFees(address executionFees_) external;\n\n    /**\n     * @notice Sets the linked client for a specific chain ID.\n     * @dev Stores the address of the linked client in a mapping with the chain ID as the key.\n     * @param chainId The chain ID for which the client is being set.\n     * @param client The address of the client being linked.\n     */\n    function setLinkedClient(uint256 chainId, bytes32 client) external;\n\n    /**\n     * @notice Sets the address of the InterchainDB contract.\n     * @dev Only callable by the contract owner or an authorized account.\n     * @param _interchainDB The address of the InterchainDB contract.\n     */\n    function setInterchainDB(address _interchainDB) external;\n\n    /**\n     * @notice Sends a message to another chain via the Interchain Communication Protocol.\n     * @dev Charges a fee for the message, which is payable upon calling this function:\n     * - Verification fees: paid to every module that verifies the message.\n     * - Execution fee: paid to the executor that executes the message.\n     * Note: while a specific execution service is specified to request the execution of the message,\n     * any executor is able to execute the message on destination chain, earning the execution fee.\n     * @param dstChainId The chain ID of the destination chain.\n     * @param receiver The address of the receiver on the destination chain.\n     * @param srcExecutionService The address of the execution service to use for the message.\n     * @param srcModules The source modules involved in the message sending.\n     * @param options Execution options for the message sent, encoded as bytes, currently primarily gas limit + native gas drop.\n     * @param message The message being sent.\n     */\n    function interchainSend(\n        uint256 dstChainId,\n        bytes32 receiver,\n        address srcExecutionService,\n        address[] calldata srcModules,\n        bytes calldata options,\n        bytes calldata message\n    )\n        external\n        payable;\n\n    /**\n     * @notice Executes a transaction that has been sent via the Interchain.\n     * @dev The transaction must have been previously sent and recorded.\n     * Transaction data includes the requested gas limit, but the executors could specify a different gas limit.\n     * If the specified gas limit is lower than requested, the requested gas limit will be used.\n     * Otherwise, the specified gas limit will be used.\n     * This allows to execute the transactions with requested gas limit set too low.\n     * @param gasLimit          The gas limit to use for the execution.\n     * @param transaction       The transaction data.\n     */\n    function interchainExecute(uint256 gasLimit, bytes calldata transaction) external payable;\n\n    /**\n     * @notice Checks if a transaction is executable.\n     * @dev Determines if a transaction meets the criteria to be executed based on:\n     * - If approved modules have written to the InterchainDB\n     * - If the threshold of approved modules have been met\n     * - If the optimistic window has passed for all modules\n     * @param transaction The InterchainTransaction struct to be checked.\n     * @return bool Returns true if the transaction is executable, false otherwise.\n     */\n    function isExecutable(bytes calldata transaction) external view returns (bool);\n}\n\n// contracts/libs/Options.sol\n\n/// @notice Struct to hold V1 of options data.\n/// @dev Next versions have to use the fields from the previous version and add new fields at the end.\n/// @param gasLimit The gas limit for the transaction.\n/// @param gasAirdrop The amount of gas to airdrop.\nstruct OptionsV1 {\n    uint256 gasLimit;\n    uint256 gasAirdrop;\n}\n\nusing OptionsLib for OptionsV1 global;\n\n/// @title OptionsLib\n/// @notice A library for encoding and decoding Interchain options related to interchain messages.\nlibrary OptionsLib {\n    error OptionsLib__IncorrectVersion(uint8 version);\n\n    uint8 constant OPTIONS_V1 = 1;\n\n    /// @notice Encodes versioned options into a bytes format.\n    /// @param version      The version of the options.\n    /// @param options      The options to encode.\n    function encodeVersionedOptions(uint8 version, bytes memory options) internal pure returns (bytes memory) {\n        return abi.encode(version, options);\n    }\n\n    /// @notice Decodes versioned options from a bytes format back into a version and options.\n    /// @param data         The versioned options data in bytes format.\n    /// @return version     The version of the options.\n    /// @return options     The options as bytes.\n    function decodeVersionedOptions(bytes memory data) internal pure returns (uint8 version, bytes memory options) {\n        (version, options) = abi.decode(data, (uint8, bytes));\n    }\n\n    /// @notice Encodes V1 options into a bytes format.\n    /// @param options      The OptionsV1 to encode.\n    function encodeOptionsV1(OptionsV1 memory options) internal pure returns (bytes memory) {\n        return encodeVersionedOptions(OPTIONS_V1, abi.encode(options));\n    }\n\n    /// @notice Decodes options (V1 or higher) from a bytes format back into an OptionsV1 struct.\n    /// @param data         The options data in bytes format.\n    function decodeOptionsV1(bytes memory data) internal pure returns (OptionsV1 memory) {\n        (uint8 version, bytes memory options) = decodeVersionedOptions(data);\n        if (version \u003c OPTIONS_V1) {\n            revert OptionsLib__IncorrectVersion(version);\n        }\n        // Structs of the same version will always be decoded correctly.\n        // Following versions will be decoded correctly if they have the same fields as the previous version,\n        // and new fields at the end: abi.decode ignores the extra bytes in the decoded payload.\n        return abi.decode(options, (OptionsV1));\n    }\n}\n\n// contracts/InterchainApp.sol\n\ncontract InterchainApp {\n    // What properties should Interchain be pulling from InterchainApp?\n    // 1. Which modules to use, and how many are required?\n\n    IInterchainClientV1 public interchain;\n\n    address[] private sendingModules;\n    address[] private receivingModules;\n\n    struct AppConfig {\n        // ChainID -\u003e Linked IApps\n        mapping(uint64 =\u003e address) linkedIApps;\n        // Sends message to be verified through all modules\n        address[] sendingModules;\n        // Accepts messages from these destination chain modules\n        address[] receivingModules;\n        // Threshold for execution\n        uint256 requiredResponses;\n        // Time period for optimistic execution\n        uint64 optimisticTimePeriod; // in seconds\n    }\n\n    AppConfig private appConfig;\n\n    // Set the application configuration\n    function setAppConfig(\n        uint64[] memory chainIDs,\n        address[] memory linkedIApps,\n        address[] memory _sendingModules,\n        address[] memory _receivingModules,\n        uint256 _requiredResponses,\n        uint64 _optimisticTimePeriod\n    )\n        public\n    {\n        // TODO: Add access control or ownership checks\n        require(chainIDs.length == linkedIApps.length, \"ChainIDs and IApps length mismatch\");\n\n        for (uint256 i = 0; i \u003c chainIDs.length; i++) {\n            appConfig.linkedIApps[chainIDs[i]] = linkedIApps[i];\n        }\n\n        appConfig.sendingModules = _sendingModules;\n        appConfig.receivingModules = _receivingModules;\n        appConfig.requiredResponses = _requiredResponses;\n        appConfig.optimisticTimePeriod = _optimisticTimePeriod;\n    }\n\n    // Getters for the application configuration\n    function getLinkedIApp(uint64 chainID) external view returns (address) {\n        return appConfig.linkedIApps[chainID];\n    }\n\n    // TODO: Is a receiving module the same as a sending module?\n    function getSendingModules() external view returns (address[] memory) {\n        return appConfig.sendingModules;\n    }\n\n    function getReceivingModules() external view returns (address[] memory) {\n        return appConfig.receivingModules;\n    }\n\n    function getRequiredResponses() external view returns (uint256) {\n        return appConfig.requiredResponses;\n    }\n\n    function getOptimisticTimePeriod() external view returns (uint64) {\n        return appConfig.optimisticTimePeriod;\n    }\n\n    function getSendingModules(bytes32 receiver, uint256 dstChainId) external view returns (address[] memory) {\n        return sendingModules;\n    }\n\n    function getReceivingModules(bytes32 transactionId) external view returns (address[] memory) {\n        return receivingModules;\n    }\n\n    constructor(address _interchain, address[] memory _sendingModules, address[] memory _receivingModules) {\n        interchain = IInterchainClientV1(_interchain);\n        appConfig.sendingModules = _sendingModules;\n        appConfig.receivingModules = _receivingModules;\n    }\n\n    event AppMessageRecieve();\n    event AppMessageSent();\n\n    function send(bytes32 receiver, uint256 dstChainId, bytes calldata message) external payable {\n        bytes memory options = OptionsV1(200_000, 0).encodeOptionsV1();\n        // TODO: Currently, we forward all gas to Interchain, this may not be expected behavior, and the real abstract contract shouldn't do this\n        interchain.interchainSend{value: msg.value}(\n            dstChainId, receiver, address(0), appConfig.sendingModules, options, message\n        );\n        emit AppMessageSent();\n    }\n\n    // TODO: Auth checks based on incoming message\n    function appReceive() external {\n        emit AppMessageRecieve();\n    }\n}\n","language":"Solidity","languageVersion":"0.8.20","compilerVersion":"0.8.20","compilerOptions":"--combined-json bin,bin-runtime,srcmap,srcmap-runtime,abi,userdoc,devdoc,metadata,hashes --optimize --optimize-runs 10000 --allow-paths ., ./, ../ --evm-version=istanbul","srcMap":"","srcMapRuntime":"","abiDefinition":[{"inputs":[{"internalType":"uint256","name":"actual","type":"uint256"},{"internalType":"uint256","name":"expected","type":"uint256"}],"name":"InterchainClientV1__IncorrectMsgValue","type":"error"},{"inputs":[{"internalType":"uint256","name":"gasLimit","type":"uint256"},{"internalType":"bytes","name":"transaction","type":"bytes"}],"name":"interchainExecute","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"dstChainId","type":"uint256"},{"internalType":"bytes32","name":"receiver","type":"bytes32"},{"internalType":"address","name":"srcExecutionService","type":"address"},{"internalType":"address[]","name":"srcModules","type":"address[]"},{"internalType":"bytes","name":"options","type":"bytes"},{"internalType":"bytes","name":"message","type":"bytes"}],"name":"interchainSend","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"bytes","name":"transaction","type":"bytes"}],"name":"isExecutable","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"executionFees_","type":"address"}],"name":"setExecutionFees","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_interchainDB","type":"address"}],"name":"setInterchainDB","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"chainId","type":"uint256"},{"internalType":"bytes32","name":"client","type":"bytes32"}],"name":"setLinkedClient","outputs":[],"stateMutability":"nonpayable","type":"function"}],"userDoc":{"kind":"user","methods":{"interchainExecute(uint256,bytes)":{"notice":"Executes a transaction that has been sent via the Interchain."},"interchainSend(uint256,bytes32,address,address[],bytes,bytes)":{"notice":"Sends a message to another chain via the Interchain Communication Protocol."},"isExecutable(bytes)":{"notice":"Checks if a transaction is executable."},"setExecutionFees(address)":{"notice":"Sets the address of the ExecutionFees contract."},"setInterchainDB(address)":{"notice":"Sets the address of the InterchainDB contract."},"setLinkedClient(uint256,bytes32)":{"notice":"Sets the linked client for a specific chain ID."}},"version":1},"developerDoc":{"kind":"dev","methods":{"interchainExecute(uint256,bytes)":{"details":"The transaction must have been previously sent and recorded. Transaction data includes the requested gas limit, but the executors could specify a different gas limit. If the specified gas limit is lower than requested, the requested gas limit will be used. Otherwise, the specified gas limit will be used. This allows to execute the transactions with requested gas limit set too low.","params":{"gasLimit":"The gas limit to use for the execution.","transaction":"The transaction data."}},"interchainSend(uint256,bytes32,address,address[],bytes,bytes)":{"details":"Charges a fee for the message, which is payable upon calling this function: - Verification fees: paid to every module that verifies the message. - Execution fee: paid to the executor that executes the message. Note: while a specific execution service is specified to request the execution of the message, any executor is able to execute the message on destination chain, earning the execution fee.","params":{"dstChainId":"The chain ID of the destination chain.","message":"The message being sent.","options":"Execution options for the message sent, encoded as bytes, currently primarily gas limit + native gas drop.","receiver":"The address of the receiver on the destination chain.","srcExecutionService":"The address of the execution service to use for the message.","srcModules":"The source modules involved in the message sending."}},"isExecutable(bytes)":{"details":"Determines if a transaction meets the criteria to be executed based on: - If approved modules have written to the InterchainDB - If the threshold of approved modules have been met - If the optimistic window has passed for all modules","params":{"transaction":"The InterchainTransaction struct to be checked."},"returns":{"_0":"bool Returns true if the transaction is executable, false otherwise."}},"setExecutionFees(address)":{"details":"Only callable by the contract owner or an authorized account.","params":{"executionFees_":"The address of the ExecutionFees contract."}},"setInterchainDB(address)":{"details":"Only callable by the contract owner or an authorized account.","params":{"_interchainDB":"The address of the InterchainDB contract."}},"setLinkedClient(uint256,bytes32)":{"details":"Stores the address of the linked client in a mapping with the chain ID as the key.","params":{"chainId":"The chain ID for which the client is being set.","client":"The address of the client being linked."}}},"version":1},"metadata":"{\"compiler\":{\"version\":\"0.8.20+commit.a1b79de6\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"actual\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"expected\",\"type\":\"uint256\"}],\"name\":\"InterchainClientV1__IncorrectMsgValue\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"gasLimit\",\"type\":\"uint256\"},{\"internalType\":\"bytes\",\"name\":\"transaction\",\"type\":\"bytes\"}],\"name\":\"interchainExecute\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"dstChainId\",\"type\":\"uint256\"},{\"internalType\":\"bytes32\",\"name\":\"receiver\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"srcExecutionService\",\"type\":\"address\"},{\"internalType\":\"address[]\",\"name\":\"srcModules\",\"type\":\"address[]\"},{\"internalType\":\"bytes\",\"name\":\"options\",\"type\":\"bytes\"},{\"internalType\":\"bytes\",\"name\":\"message\",\"type\":\"bytes\"}],\"name\":\"interchainSend\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes\",\"name\":\"transaction\",\"type\":\"bytes\"}],\"name\":\"isExecutable\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"executionFees_\",\"type\":\"address\"}],\"name\":\"setExecutionFees\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_interchainDB\",\"type\":\"address\"}],\"name\":\"setInterchainDB\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"chainId\",\"type\":\"uint256\"},{\"internalType\":\"bytes32\",\"name\":\"client\",\"type\":\"bytes32\"}],\"name\":\"setLinkedClient\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{\"interchainExecute(uint256,bytes)\":{\"details\":\"The transaction must have been previously sent and recorded. Transaction data includes the requested gas limit, but the executors could specify a different gas limit. If the specified gas limit is lower than requested, the requested gas limit will be used. Otherwise, the specified gas limit will be used. This allows to execute the transactions with requested gas limit set too low.\",\"params\":{\"gasLimit\":\"The gas limit to use for the execution.\",\"transaction\":\"The transaction data.\"}},\"interchainSend(uint256,bytes32,address,address[],bytes,bytes)\":{\"details\":\"Charges a fee for the message, which is payable upon calling this function: - Verification fees: paid to every module that verifies the message. - Execution fee: paid to the executor that executes the message. Note: while a specific execution service is specified to request the execution of the message, any executor is able to execute the message on destination chain, earning the execution fee.\",\"params\":{\"dstChainId\":\"The chain ID of the destination chain.\",\"message\":\"The message being sent.\",\"options\":\"Execution options for the message sent, encoded as bytes, currently primarily gas limit + native gas drop.\",\"receiver\":\"The address of the receiver on the destination chain.\",\"srcExecutionService\":\"The address of the execution service to use for the message.\",\"srcModules\":\"The source modules involved in the message sending.\"}},\"isExecutable(bytes)\":{\"details\":\"Determines if a transaction meets the criteria to be executed based on: - If approved modules have written to the InterchainDB - If the threshold of approved modules have been met - If the optimistic window has passed for all modules\",\"params\":{\"transaction\":\"The InterchainTransaction struct to be checked.\"},\"returns\":{\"_0\":\"bool Returns true if the transaction is executable, false otherwise.\"}},\"setExecutionFees(address)\":{\"details\":\"Only callable by the contract owner or an authorized account.\",\"params\":{\"executionFees_\":\"The address of the ExecutionFees contract.\"}},\"setInterchainDB(address)\":{\"details\":\"Only callable by the contract owner or an authorized account.\",\"params\":{\"_interchainDB\":\"The address of the InterchainDB contract.\"}},\"setLinkedClient(uint256,bytes32)\":{\"details\":\"Stores the address of the linked client in a mapping with the chain ID as the key.\",\"params\":{\"chainId\":\"The chain ID for which the client is being set.\",\"client\":\"The address of the client being linked.\"}}},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"interchainExecute(uint256,bytes)\":{\"notice\":\"Executes a transaction that has been sent via the Interchain.\"},\"interchainSend(uint256,bytes32,address,address[],bytes,bytes)\":{\"notice\":\"Sends a message to another chain via the Interchain Communication Protocol.\"},\"isExecutable(bytes)\":{\"notice\":\"Checks if a transaction is executable.\"},\"setExecutionFees(address)\":{\"notice\":\"Sets the address of the ExecutionFees contract.\"},\"setInterchainDB(address)\":{\"notice\":\"Sets the address of the InterchainDB contract.\"},\"setLinkedClient(uint256,bytes32)\":{\"notice\":\"Sets the linked client for a specific chain ID.\"}},\"version\":1}},\"settings\":{\"compilationTarget\":{\"solidity/InterchainApp.sol\":\"IInterchainClientV1\"},\"evmVersion\":\"istanbul\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":10000},\"remappings\":[]},\"sources\":{\"solidity/InterchainApp.sol\":{\"keccak256\":\"0xbcd6402f74919addcb511d9434c47a4d82e4b7a72153038da21f9daf8325d224\",\"urls\":[\"bzz-raw://87e94ea31a4af76e3baae52731de2ea8d5e8d2478c48d56861e45557f2d16ac7\",\"dweb:/ipfs/QmXVjc7h85v8FBh7WYx2qQrgbaXw8y7bZCGeWMcMmjjqou\"]}},\"version\":1}"},"hashes":{"interchainExecute(uint256,bytes)":"80efe777","interchainSend(uint256,bytes32,address,address[],bytes,bytes)":"98939d28","isExecutable(bytes)":"31afa7de","setExecutionFees(address)":"3dc68b87","setInterchainDB(address)":"b7ce2078","setLinkedClient(uint256,bytes32)":"f34234c8"}},"solidity/InterchainApp.sol:InterchainApp":{"code":"0x60806040523480156200001157600080fd5b506040516200106b3803806200106b8339810160408190526200003491620001e5565b600080546001600160a01b0319166001600160a01b03851617905581516200006490600490602085019062000084565b5080516200007a90600590602084019062000084565b5050505062000262565b828054828255906000526020600020908101928215620000dc579160200282015b82811115620000dc57825182546001600160a01b0319166001600160a01b03909116178255602090920191600190910190620000a5565b50620000ea929150620000ee565b5090565b5b80821115620000ea5760008155600101620000ef565b80516001600160a01b03811681146200011d57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b600082601f8301126200014a57600080fd5b815160206001600160401b038083111562000169576200016962000122565b8260051b604051601f19603f8301168101818110848211171562000191576200019162000122565b604052938452858101830193838101925087851115620001b057600080fd5b83870191505b84821015620001da57620001ca8262000105565b83529183019190830190620001b6565b979650505050505050565b600080600060608486031215620001fb57600080fd5b620002068462000105565b60208501519093506001600160401b03808211156200022457600080fd5b620002328783880162000138565b935060408601519150808211156200024957600080fd5b50620002588682870162000138565b9150509250925092565b610df980620002726000396000f3fe6080604052600436106100bc5760003560e01c8063bfc849ee11610074578063ea13398f1161004e578063ea13398f1461021a578063ef9d306a1461022f578063f31b19a91461024f57600080fd5b8063bfc849ee1461019a578063dd34f56a146101e7578063e1ef3b3f1461020757600080fd5b80637c9abd3e116100a55780637c9abd3e1461012f578063a45e107a14610158578063ab1396131461017a57600080fd5b806370838975146100c15780637bcad63014610118575b600080fd5b3480156100cd57600080fd5b506000546100ee9073ffffffffffffffffffffffffffffffffffffffff1681565b60405173ffffffffffffffffffffffffffffffffffffffff90911681526020015b60405180910390f35b34801561012457600080fd5b5061012d61026d565b005b34801561013b57600080fd5b5060075460405167ffffffffffffffff909116815260200161010f565b34801561016457600080fd5b5061016d610298565b60405161010f9190610813565b34801561018657600080fd5b5061016d61019536600461086d565b61030a565b3480156101a657600080fd5b506100ee6101b53660046108ac565b67ffffffffffffffff1660009081526003602052604090205473ffffffffffffffffffffffffffffffffffffffff1690565b3480156101f357600080fd5b5061012d610202366004610a60565b61037c565b61012d610215366004610b26565b610538565b34801561022657600080fd5b5061016d610623565b34801561023b57600080fd5b5061016d61024a366004610ba6565b610693565b34801561025b57600080fd5b5060065460405190815260200161010f565b6040517f847042eccd302ccad5013142e14e1f299a4527dba6be2e3b3e41e7e4b4b0ac8b90600090a1565b6060600360020180548060200260200160405190810160405280929190818152602001828054801561030057602002820191906000526020600020905b815473ffffffffffffffffffffffffffffffffffffffff1681526001909101906020018083116102d5575b5050505050905090565b6060600180548060200260200160405190810160405280929190818152602001828054801561036f57602002820191906000526020600020905b815473ffffffffffffffffffffffffffffffffffffffff168152600190910190602001808311610344575b5050505050905092915050565b8451865114610411576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602260248201527f436861696e49447320616e64204941707073206c656e677468206d69736d617460448201527f6368000000000000000000000000000000000000000000000000000000000000606482015260840160405180910390fd5b60005b86518110156104cb5785818151811061042f5761042f610bbf565b60200260200101516003600001600089848151811061045057610450610bbf565b602002602001015167ffffffffffffffff1667ffffffffffffffff16815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080806104c390610bee565b915050610414565b5083516104df906004906020870190610774565b5082516104f3906005906020860190610774565b50600691909155600780547fffffffffffffffffffffffffffffffffffffffffffffffff00000000000000001667ffffffffffffffff90921691909117905550505050565b600061055b604051806040016040528062030d4081526020016000815250610704565b600080546040517f98939d2800000000000000000000000000000000000000000000000000000000815292935073ffffffffffffffffffffffffffffffffffffffff16916398939d289134916105c09189918b919060049089908c908c908401610cfa565b6000604051808303818588803b1580156105d957600080fd5b505af11580156105ed573d6000803e3d6000fd5b50506040517f943237a3fcaf9fd505830acf03c74d7f672b1b7501aa0f1a79eb0170c553bd4f9350600092509050a15050505050565b606060036001018054806020026020016040519081016040528092919081815260200182805480156103005760200282019190600052602060002090815473ffffffffffffffffffffffffffffffffffffffff1681526001909101906020018083116102d5575050505050905090565b606060028054806020026020016040519081016040528092919081815260200182805480156106f857602002820191906000526020600020905b815473ffffffffffffffffffffffffffffffffffffffff1681526001909101906020018083116106cd575b50505050509050919050565b606061074260018360405160200161072e9190815181526020918201519181019190915260400190565b604051602081830303815290604052610748565b92915050565b6060828260405160200161075d929190610d9f565b604051602081830303815290604052905092915050565b8280548282559060005260206000209081019282156107ee579160200282015b828111156107ee57825182547fffffffffffffffffffffffff00000000000000000000000000000000000000001673ffffffffffffffffffffffffffffffffffffffff909116178255602090920191600190910190610794565b506107fa9291506107fe565b5090565b5b808211156107fa57600081556001016107ff565b6020808252825182820181905260009190848201906040850190845b8181101561086157835173ffffffffffffffffffffffffffffffffffffffff168352928401929184019160010161082f565b50909695505050505050565b6000806040838503121561088057600080fd5b50508035926020909101359150565b803567ffffffffffffffff811681146108a757600080fd5b919050565b6000602082840312156108be57600080fd5b6108c78261088f565b9392505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b604051601f82017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe016810167ffffffffffffffff81118282101715610944576109446108ce565b604052919050565b600067ffffffffffffffff821115610966576109666108ce565b5060051b60200190565b600082601f83011261098157600080fd5b813560206109966109918361094c565b6108fd565b82815260059290921b840181019181810190868411156109b557600080fd5b8286015b848110156109d7576109ca8161088f565b83529183019183016109b9565b509695505050505050565b600082601f8301126109f357600080fd5b81356020610a036109918361094c565b82815260059290921b84018101918181019086841115610a2257600080fd5b8286015b848110156109d757803573ffffffffffffffffffffffffffffffffffffffff81168114610a535760008081fd5b8352918301918301610a26565b60008060008060008060c08789031215610a7957600080fd5b863567ffffffffffffffff80821115610a9157600080fd5b610a9d8a838b01610970565b97506020890135915080821115610ab357600080fd5b610abf8a838b016109e2565b96506040890135915080821115610ad557600080fd5b610ae18a838b016109e2565b95506060890135915080821115610af757600080fd5b50610b0489828a016109e2565b93505060808701359150610b1a60a0880161088f565b90509295509295509295565b60008060008060608587031215610b3c57600080fd5b8435935060208501359250604085013567ffffffffffffffff80821115610b6257600080fd5b818701915087601f830112610b7657600080fd5b813581811115610b8557600080fd5b886020828501011115610b9757600080fd5b95989497505060200194505050565b600060208284031215610bb857600080fd5b5035919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60007fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8203610c46577f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b5060010190565b6000815180845260005b81811015610c7357602081850181015186830182015201610c57565b5060006020828601015260207fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f83011685010191505092915050565b8183528181602085013750600060208284010152600060207fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f840116840101905092915050565b600060c082018983526020898185015273ffffffffffffffffffffffffffffffffffffffff808a16604086015260c0606086015282895480855260e0870191508a60005283600020945060005b81811015610d65578554841683526001958601959285019201610d47565b50508581036080870152610d79818a610c4d565b935050505082810360a0840152610d91818587610cb1565b9a9950505050505050505050565b60ff83168152604060208201526000610dbb6040830184610c4d565b94935050505056fea2646970667358221220f657429fadca638f48bbf5db0cdbb3be0742ac7340ba7f36cfa480b66970758264736f6c63430008140033","runtime-code":"0x6080604052600436106100bc5760003560e01c8063bfc849ee11610074578063ea13398f1161004e578063ea13398f1461021a578063ef9d306a1461022f578063f31b19a91461024f57600080fd5b8063bfc849ee1461019a578063dd34f56a146101e7578063e1ef3b3f1461020757600080fd5b80637c9abd3e116100a55780637c9abd3e1461012f578063a45e107a14610158578063ab1396131461017a57600080fd5b806370838975146100c15780637bcad63014610118575b600080fd5b3480156100cd57600080fd5b506000546100ee9073ffffffffffffffffffffffffffffffffffffffff1681565b60405173ffffffffffffffffffffffffffffffffffffffff90911681526020015b60405180910390f35b34801561012457600080fd5b5061012d61026d565b005b34801561013b57600080fd5b5060075460405167ffffffffffffffff909116815260200161010f565b34801561016457600080fd5b5061016d610298565b60405161010f9190610813565b34801561018657600080fd5b5061016d61019536600461086d565b61030a565b3480156101a657600080fd5b506100ee6101b53660046108ac565b67ffffffffffffffff1660009081526003602052604090205473ffffffffffffffffffffffffffffffffffffffff1690565b3480156101f357600080fd5b5061012d610202366004610a60565b61037c565b61012d610215366004610b26565b610538565b34801561022657600080fd5b5061016d610623565b34801561023b57600080fd5b5061016d61024a366004610ba6565b610693565b34801561025b57600080fd5b5060065460405190815260200161010f565b6040517f847042eccd302ccad5013142e14e1f299a4527dba6be2e3b3e41e7e4b4b0ac8b90600090a1565b6060600360020180548060200260200160405190810160405280929190818152602001828054801561030057602002820191906000526020600020905b815473ffffffffffffffffffffffffffffffffffffffff1681526001909101906020018083116102d5575b5050505050905090565b6060600180548060200260200160405190810160405280929190818152602001828054801561036f57602002820191906000526020600020905b815473ffffffffffffffffffffffffffffffffffffffff168152600190910190602001808311610344575b5050505050905092915050565b8451865114610411576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602260248201527f436861696e49447320616e64204941707073206c656e677468206d69736d617460448201527f6368000000000000000000000000000000000000000000000000000000000000606482015260840160405180910390fd5b60005b86518110156104cb5785818151811061042f5761042f610bbf565b60200260200101516003600001600089848151811061045057610450610bbf565b602002602001015167ffffffffffffffff1667ffffffffffffffff16815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080806104c390610bee565b915050610414565b5083516104df906004906020870190610774565b5082516104f3906005906020860190610774565b50600691909155600780547fffffffffffffffffffffffffffffffffffffffffffffffff00000000000000001667ffffffffffffffff90921691909117905550505050565b600061055b604051806040016040528062030d4081526020016000815250610704565b600080546040517f98939d2800000000000000000000000000000000000000000000000000000000815292935073ffffffffffffffffffffffffffffffffffffffff16916398939d289134916105c09189918b919060049089908c908c908401610cfa565b6000604051808303818588803b1580156105d957600080fd5b505af11580156105ed573d6000803e3d6000fd5b50506040517f943237a3fcaf9fd505830acf03c74d7f672b1b7501aa0f1a79eb0170c553bd4f9350600092509050a15050505050565b606060036001018054806020026020016040519081016040528092919081815260200182805480156103005760200282019190600052602060002090815473ffffffffffffffffffffffffffffffffffffffff1681526001909101906020018083116102d5575050505050905090565b606060028054806020026020016040519081016040528092919081815260200182805480156106f857602002820191906000526020600020905b815473ffffffffffffffffffffffffffffffffffffffff1681526001909101906020018083116106cd575b50505050509050919050565b606061074260018360405160200161072e9190815181526020918201519181019190915260400190565b604051602081830303815290604052610748565b92915050565b6060828260405160200161075d929190610d9f565b604051602081830303815290604052905092915050565b8280548282559060005260206000209081019282156107ee579160200282015b828111156107ee57825182547fffffffffffffffffffffffff00000000000000000000000000000000000000001673ffffffffffffffffffffffffffffffffffffffff909116178255602090920191600190910190610794565b506107fa9291506107fe565b5090565b5b808211156107fa57600081556001016107ff565b6020808252825182820181905260009190848201906040850190845b8181101561086157835173ffffffffffffffffffffffffffffffffffffffff168352928401929184019160010161082f565b50909695505050505050565b6000806040838503121561088057600080fd5b50508035926020909101359150565b803567ffffffffffffffff811681146108a757600080fd5b919050565b6000602082840312156108be57600080fd5b6108c78261088f565b9392505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b604051601f82017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe016810167ffffffffffffffff81118282101715610944576109446108ce565b604052919050565b600067ffffffffffffffff821115610966576109666108ce565b5060051b60200190565b600082601f83011261098157600080fd5b813560206109966109918361094c565b6108fd565b82815260059290921b840181019181810190868411156109b557600080fd5b8286015b848110156109d7576109ca8161088f565b83529183019183016109b9565b509695505050505050565b600082601f8301126109f357600080fd5b81356020610a036109918361094c565b82815260059290921b84018101918181019086841115610a2257600080fd5b8286015b848110156109d757803573ffffffffffffffffffffffffffffffffffffffff81168114610a535760008081fd5b8352918301918301610a26565b60008060008060008060c08789031215610a7957600080fd5b863567ffffffffffffffff80821115610a9157600080fd5b610a9d8a838b01610970565b97506020890135915080821115610ab357600080fd5b610abf8a838b016109e2565b96506040890135915080821115610ad557600080fd5b610ae18a838b016109e2565b95506060890135915080821115610af757600080fd5b50610b0489828a016109e2565b93505060808701359150610b1a60a0880161088f565b90509295509295509295565b60008060008060608587031215610b3c57600080fd5b8435935060208501359250604085013567ffffffffffffffff80821115610b6257600080fd5b818701915087601f830112610b7657600080fd5b813581811115610b8557600080fd5b886020828501011115610b9757600080fd5b95989497505060200194505050565b600060208284031215610bb857600080fd5b5035919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60007fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8203610c46577f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b5060010190565b6000815180845260005b81811015610c7357602081850181015186830182015201610c57565b5060006020828601015260207fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f83011685010191505092915050565b8183528181602085013750600060208284010152600060207fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f840116840101905092915050565b600060c082018983526020898185015273ffffffffffffffffffffffffffffffffffffffff808a16604086015260c0606086015282895480855260e0870191508a60005283600020945060005b81811015610d65578554841683526001958601959285019201610d47565b50508581036080870152610d79818a610c4d565b935050505082810360a0840152610d91818587610cb1565b9a9950505050505050505050565b60ff83168152604060208201526000610dbb6040830184610c4d565b94935050505056fea2646970667358221220f657429fadca638f48bbf5db0cdbb3be0742ac7340ba7f36cfa480b66970758264736f6c63430008140033","info":{"source":"pragma solidity =0.8.20 ^0.8.0 ^0.8.13;\n\n// contracts/interfaces/IInterchainClientV1.sol\n\ninterface IInterchainClientV1 {\n    error InterchainClientV1__IncorrectMsgValue(uint256 actual, uint256 expected);\n\n    /**\n     * @notice Sets the address of the ExecutionFees contract.\n     * @dev Only callable by the contract owner or an authorized account.\n     * @param executionFees_ The address of the ExecutionFees contract.\n     */\n    function setExecutionFees(address executionFees_) external;\n\n    /**\n     * @notice Sets the linked client for a specific chain ID.\n     * @dev Stores the address of the linked client in a mapping with the chain ID as the key.\n     * @param chainId The chain ID for which the client is being set.\n     * @param client The address of the client being linked.\n     */\n    function setLinkedClient(uint256 chainId, bytes32 client) external;\n\n    /**\n     * @notice Sets the address of the InterchainDB contract.\n     * @dev Only callable by the contract owner or an authorized account.\n     * @param _interchainDB The address of the InterchainDB contract.\n     */\n    function setInterchainDB(address _interchainDB) external;\n\n    /**\n     * @notice Sends a message to another chain via the Interchain Communication Protocol.\n     * @dev Charges a fee for the message, which is payable upon calling this function:\n     * - Verification fees: paid to every module that verifies the message.\n     * - Execution fee: paid to the executor that executes the message.\n     * Note: while a specific execution service is specified to request the execution of the message,\n     * any executor is able to execute the message on destination chain, earning the execution fee.\n     * @param dstChainId The chain ID of the destination chain.\n     * @param receiver The address of the receiver on the destination chain.\n     * @param srcExecutionService The address of the execution service to use for the message.\n     * @param srcModules The source modules involved in the message sending.\n     * @param options Execution options for the message sent, encoded as bytes, currently primarily gas limit + native gas drop.\n     * @param message The message being sent.\n     */\n    function interchainSend(\n        uint256 dstChainId,\n        bytes32 receiver,\n        address srcExecutionService,\n        address[] calldata srcModules,\n        bytes calldata options,\n        bytes calldata message\n    )\n        external\n        payable;\n\n    /**\n     * @notice Executes a transaction that has been sent via the Interchain.\n     * @dev The transaction must have been previously sent and recorded.\n     * Transaction data includes the requested gas limit, but the executors could specify a different gas limit.\n     * If the specified gas limit is lower than requested, the requested gas limit will be used.\n     * Otherwise, the specified gas limit will be used.\n     * This allows to execute the transactions with requested gas limit set too low.\n     * @param gasLimit          The gas limit to use for the execution.\n     * @param transaction       The transaction data.\n     */\n    function interchainExecute(uint256 gasLimit, bytes calldata transaction) external payable;\n\n    /**\n     * @notice Checks if a transaction is executable.\n     * @dev Determines if a transaction meets the criteria to be executed based on:\n     * - If approved modules have written to the InterchainDB\n     * - If the threshold of approved modules have been met\n     * - If the optimistic window has passed for all modules\n     * @param transaction The InterchainTransaction struct to be checked.\n     * @return bool Returns true if the transaction is executable, false otherwise.\n     */\n    function isExecutable(bytes calldata transaction) external view returns (bool);\n}\n\n// contracts/libs/Options.sol\n\n/// @notice Struct to hold V1 of options data.\n/// @dev Next versions have to use the fields from the previous version and add new fields at the end.\n/// @param gasLimit The gas limit for the transaction.\n/// @param gasAirdrop The amount of gas to airdrop.\nstruct OptionsV1 {\n    uint256 gasLimit;\n    uint256 gasAirdrop;\n}\n\nusing OptionsLib for OptionsV1 global;\n\n/// @title OptionsLib\n/// @notice A library for encoding and decoding Interchain options related to interchain messages.\nlibrary OptionsLib {\n    error OptionsLib__IncorrectVersion(uint8 version);\n\n    uint8 constant OPTIONS_V1 = 1;\n\n    /// @notice Encodes versioned options into a bytes format.\n    /// @param version      The version of the options.\n    /// @param options      The options to encode.\n    function encodeVersionedOptions(uint8 version, bytes memory options) internal pure returns (bytes memory) {\n        return abi.encode(version, options);\n    }\n\n    /// @notice Decodes versioned options from a bytes format back into a version and options.\n    /// @param data         The versioned options data in bytes format.\n    /// @return version     The version of the options.\n    /// @return options     The options as bytes.\n    function decodeVersionedOptions(bytes memory data) internal pure returns (uint8 version, bytes memory options) {\n        (version, options) = abi.decode(data, (uint8, bytes));\n    }\n\n    /// @notice Encodes V1 options into a bytes format.\n    /// @param options      The OptionsV1 to encode.\n    function encodeOptionsV1(OptionsV1 memory options) internal pure returns (bytes memory) {\n        return encodeVersionedOptions(OPTIONS_V1, abi.encode(options));\n    }\n\n    /// @notice Decodes options (V1 or higher) from a bytes format back into an OptionsV1 struct.\n    /// @param data         The options data in bytes format.\n    function decodeOptionsV1(bytes memory data) internal pure returns (OptionsV1 memory) {\n        (uint8 version, bytes memory options) = decodeVersionedOptions(data);\n        if (version \u003c OPTIONS_V1) {\n            revert OptionsLib__IncorrectVersion(version);\n        }\n        // Structs of the same version will always be decoded correctly.\n        // Following versions will be decoded correctly if they have the same fields as the previous version,\n        // and new fields at the end: abi.decode ignores the extra bytes in the decoded payload.\n        return abi.decode(options, (OptionsV1));\n    }\n}\n\n// contracts/InterchainApp.sol\n\ncontract InterchainApp {\n    // What properties should Interchain be pulling from InterchainApp?\n    // 1. Which modules to use, and how many are required?\n\n    IInterchainClientV1 public interchain;\n\n    address[] private sendingModules;\n    address[] private receivingModules;\n\n    struct AppConfig {\n        // ChainID -\u003e Linked IApps\n        mapping(uint64 =\u003e address) linkedIApps;\n        // Sends message to be verified through all modules\n        address[] sendingModules;\n        // Accepts messages from these destination chain modules\n        address[] receivingModules;\n        // Threshold for execution\n        uint256 requiredResponses;\n        // Time period for optimistic execution\n        uint64 optimisticTimePeriod; // in seconds\n    }\n\n    AppConfig private appConfig;\n\n    // Set the application configuration\n    function setAppConfig(\n        uint64[] memory chainIDs,\n        address[] memory linkedIApps,\n        address[] memory _sendingModules,\n        address[] memory _receivingModules,\n        uint256 _requiredResponses,\n        uint64 _optimisticTimePeriod\n    )\n        public\n    {\n        // TODO: Add access control or ownership checks\n        require(chainIDs.length == linkedIApps.length, \"ChainIDs and IApps length mismatch\");\n\n        for (uint256 i = 0; i \u003c chainIDs.length; i++) {\n            appConfig.linkedIApps[chainIDs[i]] = linkedIApps[i];\n        }\n\n        appConfig.sendingModules = _sendingModules;\n        appConfig.receivingModules = _receivingModules;\n        appConfig.requiredResponses = _requiredResponses;\n        appConfig.optimisticTimePeriod = _optimisticTimePeriod;\n    }\n\n    // Getters for the application configuration\n    function getLinkedIApp(uint64 chainID) external view returns (address) {\n        return appConfig.linkedIApps[chainID];\n    }\n\n    // TODO: Is a receiving module the same as a sending module?\n    function getSendingModules() external view returns (address[] memory) {\n        return appConfig.sendingModules;\n    }\n\n    function getReceivingModules() external view returns (address[] memory) {\n        return appConfig.receivingModules;\n    }\n\n    function getRequiredResponses() external view returns (uint256) {\n        return appConfig.requiredResponses;\n    }\n\n    function getOptimisticTimePeriod() external view returns (uint64) {\n        return appConfig.optimisticTimePeriod;\n    }\n\n    function getSendingModules(bytes32 receiver, uint256 dstChainId) external view returns (address[] memory) {\n        return sendingModules;\n    }\n\n    function getReceivingModules(bytes32 transactionId) external view returns (address[] memory) {\n        return receivingModules;\n    }\n\n    constructor(address _interchain, address[] memory _sendingModules, address[] memory _receivingModules) {\n        interchain = IInterchainClientV1(_interchain);\n        appConfig.sendingModules = _sendingModules;\n        appConfig.receivingModules = _receivingModules;\n    }\n\n    event AppMessageRecieve();\n    event AppMessageSent();\n\n    function send(bytes32 receiver, uint256 dstChainId, bytes calldata message) external payable {\n        bytes memory options = OptionsV1(200_000, 0).encodeOptionsV1();\n        // TODO: Currently, we forward all gas to Interchain, this may not be expected behavior, and the real abstract contract shouldn't do this\n        interchain.interchainSend{value: msg.value}(\n            dstChainId, receiver, address(0), appConfig.sendingModules, options, message\n        );\n        emit AppMessageSent();\n    }\n\n    // TODO: Auth checks based on incoming message\n    function appReceive() external {\n        emit AppMessageRecieve();\n    }\n}\n","language":"Solidity","languageVersion":"0.8.20","compilerVersion":"0.8.20","compilerOptions":"--combined-json bin,bin-runtime,srcmap,srcmap-runtime,abi,userdoc,devdoc,metadata,hashes --optimize --optimize-runs 10000 --allow-paths ., ./, ../ --evm-version=istanbul","srcMap":"6285:3646:0:-:0;;;8959:273;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;9072:10;:45;;-1:-1:-1;;;;;;9072:45:0;-1:-1:-1;;;;;9072:45:0;;;;;9127:42;;;;:24;;:42;;;;;:::i;:::-;-1:-1:-1;9179:46:0;;;;:26;;:46;;;;;:::i;:::-;;8959:273;;;6285:3646;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;;6285:3646:0;-1:-1:-1;;;;;6285:3646:0;;;;;;;;;;;-1:-1:-1;6285:3646:0;;;;;;;-1:-1:-1;6285:3646:0;;;-1:-1:-1;6285:3646:0;:::i;:::-;;;:::o;:::-;;;;;;;;;;;;;;;14:177:1;93:13;;-1:-1:-1;;;;;135:31:1;;125:42;;115:70;;181:1;178;171:12;115:70;14:177;;;:::o;196:127::-;257:10;252:3;248:20;245:1;238:31;288:4;285:1;278:15;312:4;309:1;302:15;328:923;393:5;446:3;439:4;431:6;427:17;423:27;413:55;;464:1;461;454:12;413:55;487:13;;519:4;-1:-1:-1;;;;;572:10:1;;;569:36;;;585:18;;:::i;:::-;631:2;628:1;624:10;663:2;657:9;726:2;722:7;717:2;713;709:11;705:25;697:6;693:38;781:6;769:10;766:22;761:2;749:10;746:18;743:46;740:72;;;792:18;;:::i;:::-;828:2;821:22;878:18;;;954:15;;;950:24;;;912:15;;;;-1:-1:-1;986:15:1;;;983:35;;;1014:1;1011;1004:12;983:35;1050:2;1042:6;1038:15;1027:26;;1062:159;1078:6;1073:3;1070:15;1062:159;;;1144:34;1174:3;1144:34;:::i;:::-;1132:47;;1199:12;;;;1095;;;;1062:159;;;1239:6;328:923;-1:-1:-1;;;;;;;328:923:1:o;1256:699::-;1394:6;1402;1410;1463:2;1451:9;1442:7;1438:23;1434:32;1431:52;;;1479:1;1476;1469:12;1431:52;1502:40;1532:9;1502:40;:::i;:::-;1586:2;1571:18;;1565:25;1492:50;;-1:-1:-1;;;;;;1639:14:1;;;1636:34;;;1666:1;1663;1656:12;1636:34;1689:72;1753:7;1744:6;1733:9;1729:22;1689:72;:::i;:::-;1679:82;;1807:2;1796:9;1792:18;1786:25;1770:41;;1836:2;1826:8;1823:16;1820:36;;;1852:1;1849;1842:12;1820:36;;1875:74;1941:7;1930:8;1919:9;1915:24;1875:74;:::i;:::-;1865:84;;;1256:699;;;;;:::o;:::-;6285:3646:0;;;;;;","srcMapRuntime":"6285:3646:0:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;6446:37;;;;;;;;;;-1:-1:-1;6446:37:0;;;;;;;;;;;216:42:1;204:55;;;186:74;;174:2;159:18;6446:37:0;;;;;;;;9857:72;;;;;;;;;;;;;:::i;:::-;;8544:120;;;;;;;;;;-1:-1:-1;8627:30:0;;8544:120;;8627:30;;;;415:50:1;;403:2;388:18;8544:120:0;271:200:1;8295:122:0;;;;;;;;;;;;;:::i;:::-;;;;;;;:::i;8670:144::-;;;;;;;;;;-1:-1:-1;8670:144:0;;;;;:::i;:::-;;:::i;7975:125::-;;;;;;;;;;-1:-1:-1;7975:125:0;;;;;:::i;:::-;8063:30;;8037:7;8063:30;;;:9;:30;;;;;;;;;7975:125;7121:799;;;;;;;;;;-1:-1:-1;7121:799:0;;;;;:::i;:::-;;:::i;9298:502::-;;;;;;:::i;:::-;;:::i;8171:118::-;;;;;;;;;;;;;:::i;8820:133::-;;;;;;;;;;-1:-1:-1;8820:133:0;;;;;:::i;:::-;;:::i;8423:115::-;;;;;;;;;;-1:-1:-1;8504:27:0;;8423:115;;6525:25:1;;;6513:2;6498:18;8423:115:0;6379:177:1;9857:72:0;9903:19;;;;;;;9857:72::o;8295:122::-;8349:16;8384:9;:26;;8377:33;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8295:122;:::o;8670:144::-;8758:16;8793:14;8786:21;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8670:144;;;;:::o;7121:799::-;7493:11;:18;7474:8;:15;:37;7466:84;;;;;;;6763:2:1;7466:84:0;;;6745:21:1;6802:2;6782:18;;;6775:30;6841:34;6821:18;;;6814:62;6912:4;6892:18;;;6885:32;6934:19;;7466:84:0;;;;;;;;7566:9;7561:122;7585:8;:15;7581:1;:19;7561:122;;;7658:11;7670:1;7658:14;;;;;;;;:::i;:::-;;;;;;;7621:9;:21;;:34;7643:8;7652:1;7643:11;;;;;;;;:::i;:::-;;;;;;;7621:34;;;;;;;;;;;;;;;;:51;;;;;;;;;;;;;;;;;;7602:3;;;;;:::i;:::-;;;;7561:122;;;-1:-1:-1;7693:42:0;;;;:24;;:42;;;;;:::i;:::-;-1:-1:-1;7745:46:0;;;;:26;;:46;;;;;:::i;:::-;-1:-1:-1;7801:27:0;:48;;;;7859:30;:54;;;;;;;;;;;;;;-1:-1:-1;;;;7121:799:0:o;9298:502::-;9401:20;9424:39;:21;;;;;;;;9434:7;9424:21;;;;9443:1;9424:21;;;:37;:39::i;:::-;9619:10;;;:143;;;;;9401:62;;-1:-1:-1;9619:10:0;;;:25;;9652:9;;9619:143;;9676:10;;9688:8;;9619:10;9710:24;;9401:62;;9745:7;;;;9619:143;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;9777:16:0;;;;-1:-1:-1;9777:16:0;;-1:-1:-1;9777:16:0;-1:-1:-1;9777:16:0;9391:409;9298:502;;;;:::o;8171:118::-;8223:16;8258:9;:24;;8251:31;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8171:118;:::o;8820:133::-;8895:16;8930;8923:23;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8820:133;;;:::o;5313:167::-;5387:12;5418:55;4402:1;5464:7;5453:19;;;;;;;9809:13:1;;9791:32;;9879:4;9867:17;;;9861:24;9839:20;;;9832:54;;;;9779:2;9764:18;;9595:297;5453:19:0;;;;;;;;;;;;;5418:22;:55::i;:::-;5411:62;5313:167;-1:-1:-1;;5313:167:0:o;4580:158::-;4672:12;4714:7;4723;4703:28;;;;;;;;;:::i;:::-;;;;;;;;;;;;;4696:35;;4580:158;;;;:::o;-1:-1:-1:-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;:::o;:::-;;;;;;;;;;;;;;;476:681:1;647:2;699:21;;;769:13;;672:18;;;791:22;;;618:4;;647:2;870:15;;;;844:2;829:18;;;618:4;913:218;927:6;924:1;921:13;913:218;;;992:13;;1007:42;988:62;976:75;;1106:15;;;;1071:12;;;;949:1;942:9;913:218;;;-1:-1:-1;1148:3:1;;476:681;-1:-1:-1;;;;;;476:681:1:o;1162:248::-;1230:6;1238;1291:2;1279:9;1270:7;1266:23;1262:32;1259:52;;;1307:1;1304;1297:12;1259:52;-1:-1:-1;;1330:23:1;;;1400:2;1385:18;;;1372:32;;-1:-1:-1;1162:248:1:o;1415:171::-;1482:20;;1542:18;1531:30;;1521:41;;1511:69;;1576:1;1573;1566:12;1511:69;1415:171;;;:::o;1591:184::-;1649:6;1702:2;1690:9;1681:7;1677:23;1673:32;1670:52;;;1718:1;1715;1708:12;1670:52;1741:28;1759:9;1741:28;:::i;:::-;1731:38;1591:184;-1:-1:-1;;;1591:184:1:o;2011:::-;2063:77;2060:1;2053:88;2160:4;2157:1;2150:15;2184:4;2181:1;2174:15;2200:334;2271:2;2265:9;2327:2;2317:13;;2332:66;2313:86;2301:99;;2430:18;2415:34;;2451:22;;;2412:62;2409:88;;;2477:18;;:::i;:::-;2513:2;2506:22;2200:334;;-1:-1:-1;2200:334:1:o;2539:182::-;2598:4;2631:18;2623:6;2620:30;2617:56;;;2653:18;;:::i;:::-;-1:-1:-1;2698:1:1;2694:14;2710:4;2690:25;;2539:182::o;2726:665::-;2779:5;2832:3;2825:4;2817:6;2813:17;2809:27;2799:55;;2850:1;2847;2840:12;2799:55;2886:6;2873:20;2912:4;2936:59;2952:42;2991:2;2952:42;:::i;:::-;2936:59;:::i;:::-;3029:15;;;3115:1;3111:10;;;;3099:23;;3095:32;;;3060:12;;;;3139:15;;;3136:35;;;3167:1;3164;3157:12;3136:35;3203:2;3195:6;3191:15;3215:147;3231:6;3226:3;3223:15;3215:147;;;3297:22;3315:3;3297:22;:::i;:::-;3285:35;;3340:12;;;;3248;;3215:147;;;-1:-1:-1;3380:5:1;2726:665;-1:-1:-1;;;;;;2726:665:1:o;3396:868::-;3450:5;3503:3;3496:4;3488:6;3484:17;3480:27;3470:55;;3521:1;3518;3511:12;3470:55;3557:6;3544:20;3583:4;3607:59;3623:42;3662:2;3623:42;:::i;3607:59::-;3700:15;;;3786:1;3782:10;;;;3770:23;;3766:32;;;3731:12;;;;3810:15;;;3807:35;;;3838:1;3835;3828:12;3807:35;3874:2;3866:6;3862:15;3886:349;3902:6;3897:3;3894:15;3886:349;;;3982:3;3969:17;4030:42;4023:5;4019:54;4012:5;4009:65;3999:163;;4116:1;4145:2;4141;4134:14;3999:163;4175:18;;4213:12;;;;3919;;3886:349;;4269:1188;4471:6;4479;4487;4495;4503;4511;4564:3;4552:9;4543:7;4539:23;4535:33;4532:53;;;4581:1;4578;4571:12;4532:53;4621:9;4608:23;4650:18;4691:2;4683:6;4680:14;4677:34;;;4707:1;4704;4697:12;4677:34;4730:60;4782:7;4773:6;4762:9;4758:22;4730:60;:::i;:::-;4720:70;;4843:2;4832:9;4828:18;4815:32;4799:48;;4872:2;4862:8;4859:16;4856:36;;;4888:1;4885;4878:12;4856:36;4911:63;4966:7;4955:8;4944:9;4940:24;4911:63;:::i;:::-;4901:73;;5027:2;5016:9;5012:18;4999:32;4983:48;;5056:2;5046:8;5043:16;5040:36;;;5072:1;5069;5062:12;5040:36;5095:63;5150:7;5139:8;5128:9;5124:24;5095:63;:::i;:::-;5085:73;;5211:2;5200:9;5196:18;5183:32;5167:48;;5240:2;5230:8;5227:16;5224:36;;;5256:1;5253;5246:12;5224:36;;5279:63;5334:7;5323:8;5312:9;5308:24;5279:63;:::i;:::-;5269:73;;;5389:3;5378:9;5374:19;5361:33;5351:43;;5413:38;5446:3;5435:9;5431:19;5413:38;:::i;:::-;5403:48;;4269:1188;;;;;;;;:::o;5462:727::-;5550:6;5558;5566;5574;5627:2;5615:9;5606:7;5602:23;5598:32;5595:52;;;5643:1;5640;5633:12;5595:52;5679:9;5666:23;5656:33;;5736:2;5725:9;5721:18;5708:32;5698:42;;5791:2;5780:9;5776:18;5763:32;5814:18;5855:2;5847:6;5844:14;5841:34;;;5871:1;5868;5861:12;5841:34;5909:6;5898:9;5894:22;5884:32;;5954:7;5947:4;5943:2;5939:13;5935:27;5925:55;;5976:1;5973;5966:12;5925:55;6016:2;6003:16;6042:2;6034:6;6031:14;6028:34;;;6058:1;6055;6048:12;6028:34;6103:7;6098:2;6089:6;6085:2;6081:15;6077:24;6074:37;6071:57;;;6124:1;6121;6114:12;6071:57;5462:727;;;;-1:-1:-1;;6155:2:1;6147:11;;-1:-1:-1;;;5462:727:1:o;6194:180::-;6253:6;6306:2;6294:9;6285:7;6281:23;6277:32;6274:52;;;6322:1;6319;6312:12;6274:52;-1:-1:-1;6345:23:1;;6194:180;-1:-1:-1;6194:180:1:o;6964:184::-;7016:77;7013:1;7006:88;7113:4;7110:1;7103:15;7137:4;7134:1;7127:15;7153:349;7192:3;7223:66;7216:5;7213:77;7210:257;;7323:77;7320:1;7313:88;7424:4;7421:1;7414:15;7452:4;7449:1;7442:15;7210:257;-1:-1:-1;7494:1:1;7483:13;;7153:349::o;7507:481::-;7548:3;7586:5;7580:12;7613:6;7608:3;7601:19;7638:1;7648:162;7662:6;7659:1;7656:13;7648:162;;;7724:4;7780:13;;;7776:22;;7770:29;7752:11;;;7748:20;;7741:59;7677:12;7648:162;;;7652:3;7855:1;7848:4;7839:6;7834:3;7830:16;7826:27;7819:38;7977:4;7907:66;7902:2;7894:6;7890:15;7886:88;7881:3;7877:98;7873:109;7866:116;;;7507:481;;;;:::o;7993:325::-;8081:6;8076:3;8069:19;8133:6;8126:5;8119:4;8114:3;8110:14;8097:43;;8185:1;8178:4;8169:6;8164:3;8160:16;8156:27;8149:38;8051:3;8307:4;8237:66;8232:2;8224:6;8220:15;8216:88;8211:3;8207:98;8203:109;8196:116;;7993:325;;;;:::o;8323:1267::-;8648:4;8696:3;8685:9;8681:19;8727:6;8716:9;8709:25;8753:2;8791:6;8786:2;8775:9;8771:18;8764:34;8817:42;8907:2;8899:6;8895:15;8890:2;8879:9;8875:18;8868:43;8947:3;8942:2;8931:9;8927:18;8920:31;8971:6;9006;9000:13;9037:6;9029;9022:22;9075:3;9064:9;9060:19;9053:26;;9098:6;9095:1;9088:17;9141:2;9138:1;9128:16;9114:30;;9162:1;9172:177;9186:6;9183:1;9180:13;9172:177;;;9251:13;;9247:22;;9235:35;;9337:1;9325:14;;;;9290:12;;;;9201:9;9172:177;;;9176:3;;9395:9;9390:3;9386:19;9380:3;9369:9;9365:19;9358:48;9429:29;9454:3;9446:6;9429:29;:::i;:::-;9415:43;;;;;9507:9;9499:6;9495:22;9489:3;9478:9;9474:19;9467:51;9535:49;9577:6;9569;9561;9535:49;:::i;:::-;9527:57;8323:1267;-1:-1:-1;;;;;;;;;;8323:1267:1:o;9897:295::-;10080:4;10072:6;10068:17;10057:9;10050:36;10122:2;10117;10106:9;10102:18;10095:30;10031:4;10142:44;10182:2;10171:9;10167:18;10159:6;10142:44;:::i;:::-;10134:52;9897:295;-1:-1:-1;;;;9897:295:1:o","abiDefinition":[{"inputs":[{"internalType":"address","name":"_interchain","type":"address"},{"internalType":"address[]","name":"_sendingModules","type":"address[]"},{"internalType":"address[]","name":"_receivingModules","type":"address[]"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[],"name":"AppMessageRecieve","type":"event"},{"anonymous":false,"inputs":[],"name":"AppMessageSent","type":"event"},{"inputs":[],"name":"appReceive","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint64","name":"chainID","type":"uint64"}],"name":"getLinkedIApp","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getOptimisticTimePeriod","outputs":[{"internalType":"uint64","name":"","type":"uint64"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getReceivingModules","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"transactionId","type":"bytes32"}],"name":"getReceivingModules","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getRequiredResponses","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"receiver","type":"bytes32"},{"internalType":"uint256","name":"dstChainId","type":"uint256"}],"name":"getSendingModules","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getSendingModules","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"interchain","outputs":[{"internalType":"contract IInterchainClientV1","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"receiver","type":"bytes32"},{"internalType":"uint256","name":"dstChainId","type":"uint256"},{"internalType":"bytes","name":"message","type":"bytes"}],"name":"send","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint64[]","name":"chainIDs","type":"uint64[]"},{"internalType":"address[]","name":"linkedIApps","type":"address[]"},{"internalType":"address[]","name":"_sendingModules","type":"address[]"},{"internalType":"address[]","name":"_receivingModules","type":"address[]"},{"internalType":"uint256","name":"_requiredResponses","type":"uint256"},{"internalType":"uint64","name":"_optimisticTimePeriod","type":"uint64"}],"name":"setAppConfig","outputs":[],"stateMutability":"nonpayable","type":"function"}],"userDoc":{"kind":"user","methods":{},"version":1},"developerDoc":{"kind":"dev","methods":{},"version":1},"metadata":"{\"compiler\":{\"version\":\"0.8.20+commit.a1b79de6\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_interchain\",\"type\":\"address\"},{\"internalType\":\"address[]\",\"name\":\"_sendingModules\",\"type\":\"address[]\"},{\"internalType\":\"address[]\",\"name\":\"_receivingModules\",\"type\":\"address[]\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[],\"name\":\"AppMessageRecieve\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[],\"name\":\"AppMessageSent\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"appReceive\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint64\",\"name\":\"chainID\",\"type\":\"uint64\"}],\"name\":\"getLinkedIApp\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getOptimisticTimePeriod\",\"outputs\":[{\"internalType\":\"uint64\",\"name\":\"\",\"type\":\"uint64\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getReceivingModules\",\"outputs\":[{\"internalType\":\"address[]\",\"name\":\"\",\"type\":\"address[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"transactionId\",\"type\":\"bytes32\"}],\"name\":\"getReceivingModules\",\"outputs\":[{\"internalType\":\"address[]\",\"name\":\"\",\"type\":\"address[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getRequiredResponses\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"receiver\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"dstChainId\",\"type\":\"uint256\"}],\"name\":\"getSendingModules\",\"outputs\":[{\"internalType\":\"address[]\",\"name\":\"\",\"type\":\"address[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getSendingModules\",\"outputs\":[{\"internalType\":\"address[]\",\"name\":\"\",\"type\":\"address[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"interchain\",\"outputs\":[{\"internalType\":\"contract IInterchainClientV1\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"receiver\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"dstChainId\",\"type\":\"uint256\"},{\"internalType\":\"bytes\",\"name\":\"message\",\"type\":\"bytes\"}],\"name\":\"send\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint64[]\",\"name\":\"chainIDs\",\"type\":\"uint64[]\"},{\"internalType\":\"address[]\",\"name\":\"linkedIApps\",\"type\":\"address[]\"},{\"internalType\":\"address[]\",\"name\":\"_sendingModules\",\"type\":\"address[]\"},{\"internalType\":\"address[]\",\"name\":\"_receivingModules\",\"type\":\"address[]\"},{\"internalType\":\"uint256\",\"name\":\"_requiredResponses\",\"type\":\"uint256\"},{\"internalType\":\"uint64\",\"name\":\"_optimisticTimePeriod\",\"type\":\"uint64\"}],\"name\":\"setAppConfig\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"solidity/InterchainApp.sol\":\"InterchainApp\"},\"evmVersion\":\"istanbul\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":10000},\"remappings\":[]},\"sources\":{\"solidity/InterchainApp.sol\":{\"keccak256\":\"0xbcd6402f74919addcb511d9434c47a4d82e4b7a72153038da21f9daf8325d224\",\"urls\":[\"bzz-raw://87e94ea31a4af76e3baae52731de2ea8d5e8d2478c48d56861e45557f2d16ac7\",\"dweb:/ipfs/QmXVjc7h85v8FBh7WYx2qQrgbaXw8y7bZCGeWMcMmjjqou\"]}},\"version\":1}"},"hashes":{"appReceive()":"7bcad630","getLinkedIApp(uint64)":"bfc849ee","getOptimisticTimePeriod()":"7c9abd3e","getReceivingModules()":"a45e107a","getReceivingModules(bytes32)":"ef9d306a","getRequiredResponses()":"f31b19a9","getSendingModules()":"ea13398f","getSendingModules(bytes32,uint256)":"ab139613","interchain()":"70838975","send(bytes32,uint256,bytes)":"e1ef3b3f","setAppConfig(uint64[],address[],address[],address[],uint256,uint64)":"dd34f56a"}},"solidity/InterchainApp.sol:OptionsLib":{"code":"0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220865c27460a9794a2b0d24cfbc4a53e76443a8d2dd6e3f956911a3d019f23792264736f6c63430008140033","runtime-code":"0x73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220865c27460a9794a2b0d24cfbc4a53e76443a8d2dd6e3f956911a3d019f23792264736f6c63430008140033","info":{"source":"pragma solidity =0.8.20 ^0.8.0 ^0.8.13;\n\n// contracts/interfaces/IInterchainClientV1.sol\n\ninterface IInterchainClientV1 {\n    error InterchainClientV1__IncorrectMsgValue(uint256 actual, uint256 expected);\n\n    /**\n     * @notice Sets the address of the ExecutionFees contract.\n     * @dev Only callable by the contract owner or an authorized account.\n     * @param executionFees_ The address of the ExecutionFees contract.\n     */\n    function setExecutionFees(address executionFees_) external;\n\n    /**\n     * @notice Sets the linked client for a specific chain ID.\n     * @dev Stores the address of the linked client in a mapping with the chain ID as the key.\n     * @param chainId The chain ID for which the client is being set.\n     * @param client The address of the client being linked.\n     */\n    function setLinkedClient(uint256 chainId, bytes32 client) external;\n\n    /**\n     * @notice Sets the address of the InterchainDB contract.\n     * @dev Only callable by the contract owner or an authorized account.\n     * @param _interchainDB The address of the InterchainDB contract.\n     */\n    function setInterchainDB(address _interchainDB) external;\n\n    /**\n     * @notice Sends a message to another chain via the Interchain Communication Protocol.\n     * @dev Charges a fee for the message, which is payable upon calling this function:\n     * - Verification fees: paid to every module that verifies the message.\n     * - Execution fee: paid to the executor that executes the message.\n     * Note: while a specific execution service is specified to request the execution of the message,\n     * any executor is able to execute the message on destination chain, earning the execution fee.\n     * @param dstChainId The chain ID of the destination chain.\n     * @param receiver The address of the receiver on the destination chain.\n     * @param srcExecutionService The address of the execution service to use for the message.\n     * @param srcModules The source modules involved in the message sending.\n     * @param options Execution options for the message sent, encoded as bytes, currently primarily gas limit + native gas drop.\n     * @param message The message being sent.\n     */\n    function interchainSend(\n        uint256 dstChainId,\n        bytes32 receiver,\n        address srcExecutionService,\n        address[] calldata srcModules,\n        bytes calldata options,\n        bytes calldata message\n    )\n        external\n        payable;\n\n    /**\n     * @notice Executes a transaction that has been sent via the Interchain.\n     * @dev The transaction must have been previously sent and recorded.\n     * Transaction data includes the requested gas limit, but the executors could specify a different gas limit.\n     * If the specified gas limit is lower than requested, the requested gas limit will be used.\n     * Otherwise, the specified gas limit will be used.\n     * This allows to execute the transactions with requested gas limit set too low.\n     * @param gasLimit          The gas limit to use for the execution.\n     * @param transaction       The transaction data.\n     */\n    function interchainExecute(uint256 gasLimit, bytes calldata transaction) external payable;\n\n    /**\n     * @notice Checks if a transaction is executable.\n     * @dev Determines if a transaction meets the criteria to be executed based on:\n     * - If approved modules have written to the InterchainDB\n     * - If the threshold of approved modules have been met\n     * - If the optimistic window has passed for all modules\n     * @param transaction The InterchainTransaction struct to be checked.\n     * @return bool Returns true if the transaction is executable, false otherwise.\n     */\n    function isExecutable(bytes calldata transaction) external view returns (bool);\n}\n\n// contracts/libs/Options.sol\n\n/// @notice Struct to hold V1 of options data.\n/// @dev Next versions have to use the fields from the previous version and add new fields at the end.\n/// @param gasLimit The gas limit for the transaction.\n/// @param gasAirdrop The amount of gas to airdrop.\nstruct OptionsV1 {\n    uint256 gasLimit;\n    uint256 gasAirdrop;\n}\n\nusing OptionsLib for OptionsV1 global;\n\n/// @title OptionsLib\n/// @notice A library for encoding and decoding Interchain options related to interchain messages.\nlibrary OptionsLib {\n    error OptionsLib__IncorrectVersion(uint8 version);\n\n    uint8 constant OPTIONS_V1 = 1;\n\n    /// @notice Encodes versioned options into a bytes format.\n    /// @param version      The version of the options.\n    /// @param options      The options to encode.\n    function encodeVersionedOptions(uint8 version, bytes memory options) internal pure returns (bytes memory) {\n        return abi.encode(version, options);\n    }\n\n    /// @notice Decodes versioned options from a bytes format back into a version and options.\n    /// @param data         The versioned options data in bytes format.\n    /// @return version     The version of the options.\n    /// @return options     The options as bytes.\n    function decodeVersionedOptions(bytes memory data) internal pure returns (uint8 version, bytes memory options) {\n        (version, options) = abi.decode(data, (uint8, bytes));\n    }\n\n    /// @notice Encodes V1 options into a bytes format.\n    /// @param options      The OptionsV1 to encode.\n    function encodeOptionsV1(OptionsV1 memory options) internal pure returns (bytes memory) {\n        return encodeVersionedOptions(OPTIONS_V1, abi.encode(options));\n    }\n\n    /// @notice Decodes options (V1 or higher) from a bytes format back into an OptionsV1 struct.\n    /// @param data         The options data in bytes format.\n    function decodeOptionsV1(bytes memory data) internal pure returns (OptionsV1 memory) {\n        (uint8 version, bytes memory options) = decodeVersionedOptions(data);\n        if (version \u003c OPTIONS_V1) {\n            revert OptionsLib__IncorrectVersion(version);\n        }\n        // Structs of the same version will always be decoded correctly.\n        // Following versions will be decoded correctly if they have the same fields as the previous version,\n        // and new fields at the end: abi.decode ignores the extra bytes in the decoded payload.\n        return abi.decode(options, (OptionsV1));\n    }\n}\n\n// contracts/InterchainApp.sol\n\ncontract InterchainApp {\n    // What properties should Interchain be pulling from InterchainApp?\n    // 1. Which modules to use, and how many are required?\n\n    IInterchainClientV1 public interchain;\n\n    address[] private sendingModules;\n    address[] private receivingModules;\n\n    struct AppConfig {\n        // ChainID -\u003e Linked IApps\n        mapping(uint64 =\u003e address) linkedIApps;\n        // Sends message to be verified through all modules\n        address[] sendingModules;\n        // Accepts messages from these destination chain modules\n        address[] receivingModules;\n        // Threshold for execution\n        uint256 requiredResponses;\n        // Time period for optimistic execution\n        uint64 optimisticTimePeriod; // in seconds\n    }\n\n    AppConfig private appConfig;\n\n    // Set the application configuration\n    function setAppConfig(\n        uint64[] memory chainIDs,\n        address[] memory linkedIApps,\n        address[] memory _sendingModules,\n        address[] memory _receivingModules,\n        uint256 _requiredResponses,\n        uint64 _optimisticTimePeriod\n    )\n        public\n    {\n        // TODO: Add access control or ownership checks\n        require(chainIDs.length == linkedIApps.length, \"ChainIDs and IApps length mismatch\");\n\n        for (uint256 i = 0; i \u003c chainIDs.length; i++) {\n            appConfig.linkedIApps[chainIDs[i]] = linkedIApps[i];\n        }\n\n        appConfig.sendingModules = _sendingModules;\n        appConfig.receivingModules = _receivingModules;\n        appConfig.requiredResponses = _requiredResponses;\n        appConfig.optimisticTimePeriod = _optimisticTimePeriod;\n    }\n\n    // Getters for the application configuration\n    function getLinkedIApp(uint64 chainID) external view returns (address) {\n        return appConfig.linkedIApps[chainID];\n    }\n\n    // TODO: Is a receiving module the same as a sending module?\n    function getSendingModules() external view returns (address[] memory) {\n        return appConfig.sendingModules;\n    }\n\n    function getReceivingModules() external view returns (address[] memory) {\n        return appConfig.receivingModules;\n    }\n\n    function getRequiredResponses() external view returns (uint256) {\n        return appConfig.requiredResponses;\n    }\n\n    function getOptimisticTimePeriod() external view returns (uint64) {\n        return appConfig.optimisticTimePeriod;\n    }\n\n    function getSendingModules(bytes32 receiver, uint256 dstChainId) external view returns (address[] memory) {\n        return sendingModules;\n    }\n\n    function getReceivingModules(bytes32 transactionId) external view returns (address[] memory) {\n        return receivingModules;\n    }\n\n    constructor(address _interchain, address[] memory _sendingModules, address[] memory _receivingModules) {\n        interchain = IInterchainClientV1(_interchain);\n        appConfig.sendingModules = _sendingModules;\n        appConfig.receivingModules = _receivingModules;\n    }\n\n    event AppMessageRecieve();\n    event AppMessageSent();\n\n    function send(bytes32 receiver, uint256 dstChainId, bytes calldata message) external payable {\n        bytes memory options = OptionsV1(200_000, 0).encodeOptionsV1();\n        // TODO: Currently, we forward all gas to Interchain, this may not be expected behavior, and the real abstract contract shouldn't do this\n        interchain.interchainSend{value: msg.value}(\n            dstChainId, receiver, address(0), appConfig.sendingModules, options, message\n        );\n        emit AppMessageSent();\n    }\n\n    // TODO: Auth checks based on incoming message\n    function appReceive() external {\n        emit AppMessageRecieve();\n    }\n}\n","language":"Solidity","languageVersion":"0.8.20","compilerVersion":"0.8.20","compilerOptions":"--combined-json bin,bin-runtime,srcmap,srcmap-runtime,abi,userdoc,devdoc,metadata,hashes --optimize --optimize-runs 10000 --allow-paths ., ./, ../ --evm-version=istanbul","srcMap":"4293:1958:0:-:0;;;;;;;;;;;;;;;-1:-1:-1;;;4293:1958:0;;;;;;;;;;;;;;;;;","srcMapRuntime":"4293:1958:0:-:0;;;;;;;;","abiDefinition":[{"inputs":[{"internalType":"uint8","name":"version","type":"uint8"}],"name":"OptionsLib__IncorrectVersion","type":"error"}],"userDoc":{"kind":"user","methods":{},"notice":"A library for encoding and decoding Interchain options related to interchain messages.","version":1},"developerDoc":{"kind":"dev","methods":{},"title":"OptionsLib","version":1},"metadata":"{\"compiler\":{\"version\":\"0.8.20+commit.a1b79de6\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"uint8\",\"name\":\"version\",\"type\":\"uint8\"}],\"name\":\"OptionsLib__IncorrectVersion\",\"type\":\"error\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"title\":\"OptionsLib\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"notice\":\"A library for encoding and decoding Interchain options related to interchain messages.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"solidity/InterchainApp.sol\":\"OptionsLib\"},\"evmVersion\":\"istanbul\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":10000},\"remappings\":[]},\"sources\":{\"solidity/InterchainApp.sol\":{\"keccak256\":\"0xbcd6402f74919addcb511d9434c47a4d82e4b7a72153038da21f9daf8325d224\",\"urls\":[\"bzz-raw://87e94ea31a4af76e3baae52731de2ea8d5e8d2478c48d56861e45557f2d16ac7\",\"dweb:/ipfs/QmXVjc7h85v8FBh7WYx2qQrgbaXw8y7bZCGeWMcMmjjqou\"]}},\"version\":1}"},"hashes":{}}}